extends ../layout.pug

block meta
    meta(property="og:title" content=`Leela Zero Best Networks`)
    meta(property="og:type" content="website")
    meta(property="og:url" content=`${http_host}/network-profiles`)

block script
    script(src="/static/timeago.js")
    script.
        function nFormatter(num, digits) {
            var si = [
                { value: 1, symbol: "" },
                { value: 1E3, symbol: "K" },
                { value: 1E6, symbol: "M" },
                { value: 1E9, symbol: "G" },
                { value: 1E12, symbol: "T" },
                { value: 1E15, symbol: "P" },
                { value: 1E18, symbol: "E" }
            ];
            var rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
            var i;
            for (i = si.length - 1; i > 0; i--) {
                if (num >= si[i].value) {
                break;
                }
            }
            return (num / si[i].value).toFixed(digits).replace(rx, "$1") + si[i].symbol;
        }
        Vue.filter('timeAgo', function(value) {
            var epoch = +value, delta = Date.now() - epoch;

            if(delta > 60 * 60 * 24 * 1000) {
                let date = new Date(epoch);
                return date.toLocaleDateString() + " " + date.toLocaleTimeString();
            } else {
                return deltaToAgo(delta);
            }
        })
        Vue.filter('abbr', nFormatter)
        var app = new Vue({
            el: 'main',
            data: {
                networks: !{ JSON.stringify(networks) },
            },
        })

block content
    v-container(grid-list-md text-xs-center)
        v-card
            h1 Best Networks
            
            v-card-text
                v-data-table(:items="networks" item-key="_id" hide-actions)
                    template(slot="headers"  slot-scope="props")
                        tr
                            th #
                            th Upload Date
                            th Hash
                            th Architecture
                            th Self Play Games
                            th Training
                            th Links
                    template(slot="items"  slot-scope="props")
                        tr
                            td {{ networks.length - props.index - 1 }}
                            td {{ props.item.time | timeAgo }}
                            td {{ props.item.hash.slice(0, 6) }}
                            td {{ props.item.filters }} x {{ props.item.blocks }}
                            td {{ props.item.game_count }}
                            td {{ props.item.training_count | abbr(4) }} +{{ props.item.training_steps | abbr(3)}}
                            td
                                a(:href="`/network-profiles/${props.item.hash}`") Profile
                                |
                                .
                                     | 
                                |
                                a(:href="`/networks/${props.item.hash}.gz`") Download
